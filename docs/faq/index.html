<!DOCTYPE html>
<html lang="en" data-theme="">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width">
<script type="text/javascript">/*<![CDATA[*/window.__chunkMapping={"main":["/main.6fa84909da645225b981.css","/main.a25ee9685353cfad9c19.js"],"component---site-src-pages-faq-jsa-48-8a3":["/component---site-src-pages-faq-jsa-48-8a3.fe0e43fcdd80880a67aa.js"],"component---site-src-pages-index-jsece-a18":["/component---site-src-pages-index-jsece-a18.c66c5ce1e231bdc2d14a.js"],"component---theme-doc-page-1-be-9be":["/component---theme-doc-page-1-be-9be.de09a1a8cec9a2e9c92b.js"],"docsMetadata---docsaf-7-b03":["/docsMetadata---docsaf-7-b03.61a8baebf32b4c060296.js"],"component---theme-doc-item-178-a40":["/component---theme-doc-item-178-a40.de2648345892298aff25.css","/component---theme-doc-item-178-a40.e0d35aec50d7c7aaa812.js"],"content---docs-docker-803-e77":["/content---docs-docker-803-e77.9b91eea77894c8ba0483.js"],"metadata---docs-docker-637-66c":["/metadata---docs-docker-637-66c.52806d908dd2c315d932.js"],"content---docs-faqf-0-e-366":["/content---docs-faqf-0-e-366.a92b383f4c50e7f5275c.js"],"metadata---docs-faq-1-a-7-86f":["/metadata---docs-faq-1-a-7-86f.f623057bb9102adc1508.js"],"content---docs-buck-227-233":["/content---docs-buck-227-233.ea34cf5d23998cfafd2c.js"],"metadata---docs-bucka-9-f-6ed":["/metadata---docs-bucka-9-f-6ed.b8fb27de84add4e8bd04.js"],"content---docs-configuring-13-a-a5d":["/content---docs-configuring-13-a-a5d.afd77704e82d971784cb.js"],"metadata---docs-configuring-8-d-4-aba":["/metadata---docs-configuring-8-d-4-aba.154c714647d4db72acba.js"],"content---docs-interdex-550-777":["/content---docs-interdex-550-777.b8d79af5e3dc6856bd36.js"],"metadata---docs-interdex-71-b-b2f":["/metadata---docs-interdex-71-b-b2f.dc6c7cd2bc9d2cc4fc5f.js"],"content---docs-synth-925-9b3":["/content---docs-synth-925-9b3.88c5de2d12fb26d484bf.js"],"metadata---docs-synthba-2-2d4":["/metadata---docs-synthba-2-2d4.26ea7cf107ca6d5fd191.js"],"content---docs-installation-5-fd-fc9":["/content---docs-installation-5-fd-fc9.cf1dd962c5c312ff9248.js"],"metadata---docs-installatione-1-c-9ed":["/metadata---docs-installatione-1-c-9ed.4cfa78289d4eb8be8cde.js"],"content---docs-proguard-481-f36":["/content---docs-proguard-481-f36.24fb2ada7594c644794b.js"],"metadata---docs-proguardc-0-c-841":["/metadata---docs-proguardc-0-c-841.0e01277f7dfa8a8c2d9d.js"],"content---docs-usage-545-48f":["/content---docs-usage-545-48f.cf467f524da1d5ba31a6.js"],"metadata---docs-usage-7-f-3-d1f":["/metadata---docs-usage-7-f-3-d1f.69c309267e6b2a05e184.js"]};/*]]>*/</script>

<title data-react-helmet="true">FAQ</title>

<meta data-react-helmet="true" charset="utf-8"/><meta data-react-helmet="true" http-equiv="x-ua-compatible" content="ie=edge"/><meta data-react-helmet="true" name="viewport" content="width=device-width"/><meta data-react-helmet="true" property="og:title" content="Redex · An Android Bytecode Optimizer"/><meta data-react-helmet="true" property="og:image" content="https://ThakurKarthik.github.io/img/og_image.png"/><meta data-react-helmet="true" property="twitter:image" content="https://ThakurKarthik.github.io/img/og_image.png"/><meta data-react-helmet="true" name="twitter:image:alt" content="Image for Redex · An Android Bytecode Optimizer"/><meta data-react-helmet="true" name="twitter:card" content="summary"/><meta data-react-helmet="true" name="description" content="## I&#x27;m getting &quot;Couldn&#x27;t find zipalign. See README.md to resolve this.&quot; or other zipalign errors"/><meta data-react-helmet="true" property="og:description" content="## I&#x27;m getting &quot;Couldn&#x27;t find zipalign. See README.md to resolve this.&quot; or other zipalign errors"/><meta data-react-helmet="true" property="og:url" content="https://ThakurKarthik.github.io/docs/faq"/>

<link data-react-helmet="true" rel="shortcut icon" href="/img/favicon.png"/>


<link rel="stylesheet" type="text/css" href="/main.6fa84909da645225b981.css" />

<link rel="stylesheet" type="text/css" href="/0.4b6b47aa5e3c93eeb1e7.css" />

<link rel="stylesheet" type="text/css" href="/26.83fe3ec1d8a1843e16c8.css" />

<link rel="stylesheet" type="text/css" href="/component---theme-doc-item-178-a40.de2648345892298aff25.css" />

</head>
<body >
<div id="__docusaurus">
<nav class="navbar navbar--light navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><div aria-label="Navigation bar toggle" class="navbar__toggle" role="button" tabindex="0"><svg xmlns="http://www.w3.org/2000/svg" width="30" height="30" viewBox="0 0 30 30" role="img" focusable="false"><title>Menu</title><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></div><a aria-current="page" class="navbar__brand active" href="/"><img class="navbar__logo" src="/img/favicon.png" alt="Redex Logo"/><strong class="">Redex</strong></a></div><div class="navbar__items navbar__items--right"><a class="navbar__item navbar__link" label="Docs" position="right" href="/docs/installation">Docs</a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" label="FAQ" position="right" href="/docs/faq">FAQ</a><a class="navbar__item navbar__link" href="https://code.facebook.com/posts/1480969635539475/optimizing-android-bytecode-with-redex" label="Birth" position="right" target="_blank" rel="noopener noreferrer">Birth</a><div class="react-toggle displayOnlyInLargeViewport_1gtM"><div class="react-toggle-track"><div class="react-toggle-track-check"><span class="toggle_16vC moon_1N64"></span></div><div class="react-toggle-track-x"><span class="toggle_16vC sun_3CZP"></span></div></div><div class="react-toggle-thumb"></div><input type="checkbox" aria-label="Dark mode toggle" class="react-toggle-screenreader-only"/></div></div></div><div role="presentation" class="navbar__sidebar__backdrop"></div><div class="navbar__sidebar"><div class="navbar__sidebar__brand"><a aria-current="page" class="navbar__brand active" href="/"><img class="navbar__logo" src="/img/favicon.png" alt="Redex Logo"/><strong>Redex</strong></a></div><div class="navbar__sidebar__items"><div class="menu"><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" label="Docs" position="right" href="/docs/installation">Docs</a></li><li class="menu__list-item"><a aria-current="page" class="menu__link navbar__link--active" label="FAQ" position="right" href="/docs/faq">FAQ</a></li><li class="menu__list-item"><a class="menu__link" href="https://code.facebook.com/posts/1480969635539475/optimizing-android-bytecode-with-redex" label="Birth" position="right" target="_blank" rel="noopener noreferrer">Birth</a></li></ul></div></div></div></nav><div class="docPage_1kjD"><div class="docSidebarContainer_1cYp"><div class="sidebar_1kLs"><div class="menu menu--responsive"><button aria-label="Open Menu" class="button button--secondary button--sm menu__button" type="button"><svg class="sidebarMenuIcon_2vk4" xmlns="http://www.w3.org/2000/svg" height="24" width="24" viewBox="0 0 32 32" role="img" focusable="false"><title>Menu</title><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><ul class="menu__list"><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">Getting Started</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" href="/docs/installation">Installation</a></li><li class="menu__list-item"><a class="menu__link" href="/docs/configuring">Configuring ReDex</a></li><li class="menu__list-item"><a class="menu__link" href="/docs/usage">Usage</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">Examples</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" href="/docs/proguard">Using ProGuard Rules with Redex</a></li><li class="menu__list-item"><a class="menu__link" href="/docs/synth">Redex Synth Pass Example</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">Technical Details</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" href="/docs/docker">Docker Container Deployments</a></li><li class="menu__list-item"><a class="menu__link" href="/docs/interdex">Interdex</a></li></ul></li><li class="menu__list-item"><a class="menu__link menu__link--sublist menu__link--active" href="#!">Help</a><ul class="menu__list"><li class="menu__list-item"><a aria-current="page" class="menu__link menu__link--active" href="/docs/faq">FAQ</a></li></ul></li></ul></div></div></div><main class="docMainContainer_FFX1"><div><div class="padding-vert--lg"><div class="container"><div class="row"><div class="col"><div class="docItemContainer_2cwg"><header><h1 class="docTitle_1vWb">FAQ</h1></header><article><div class="markdown"><h2><a aria-hidden="true" class="anchor" id="im-getting-couldnt-find-zipalign-see-readmemd-to-resolve-this-or-other-zipalign-errors"></a><a aria-hidden="true" class="hash-link" href="#im-getting-couldnt-find-zipalign-see-readmemd-to-resolve-this-or-other-zipalign-errors">#</a>I&#x27;m getting &quot;Couldn&#x27;t find zipalign. See README.md to resolve this.&quot; or other zipalign errors</h2><p><code>zipalign</code> is an optimization step that is bundled with the Android SDK.  You
need to tell redex where to find it.  For example, if you installed the SDK at
<code>/path/to/android/sdk</code>, try:</p><pre class="mdxCodeBlock_iHAB"><div class="codeBlockWrapper_2QGZ"><pre class="prism-code language-undefined codeBlock_19pQ" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">ANDROID_SDK=/path/to/android/sdk redex [... arguments ...]</span></div></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_1BYj">Copy</button></div></pre><p>You can alternatively add <code>zipalign</code> to your PATH, for example:</p><pre class="mdxCodeBlock_iHAB"><div class="codeBlockWrapper_2QGZ"><pre class="prism-code language-undefined codeBlock_19pQ" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">PATH=/path/to/android/sdk/build-tools/xx.y.zz:$PATH redex [... arguments ...]</span></div></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_1BYj">Copy</button></div></pre><p>Additionally, it&#x27;s possible zipalign itself failed. In this case the stderr will be reported to aid debugging (for example, zipalign fails if you provide an output path that already exists).</p><h2><a aria-hidden="true" class="anchor" id="my-app-fails-to-install-with-failure-install_parse_failed_no_certificates"></a><a aria-hidden="true" class="hash-link" href="#my-app-fails-to-install-with-failure-install_parse_failed_no_certificates">#</a>My app fails to install with <code>Failure [INSTALL_PARSE_FAILED_NO_CERTIFICATES]</code></h2><p>After you run redex, you will need to re-sign your app.  You can re-sign manually
using these instructions:
<a href="https://developer.android.com/tools/publishing/app-signing.html#signing-manually">https://developer.android.com/tools/publishing/app-signing.html#signing-manually</a>.</p><p>You can also tell redex to sign for you.  If you want to sign with the debug
key, you can simply do:</p><pre class="mdxCodeBlock_iHAB"><div class="codeBlockWrapper_2QGZ"><pre class="prism-code language-undefined codeBlock_19pQ" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">redex --sign [ ... arguments ...]</span></div></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_1BYj">Copy</button></div></pre><p>If you want to sign with your release key, you&#x27;ll need to provide the
appropriate args:</p><pre class="mdxCodeBlock_iHAB"><div class="codeBlockWrapper_2QGZ"><pre class="prism-code language-undefined codeBlock_19pQ" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">--sign Sign the apk after optimizing it</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">-s [KEYSTORE], --keystore [KEYSTORE]</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">-a [KEYALIAS], --keyalias [KEYALIAS]</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">-p [KEYPASS], --keypass [KEYPASS]</span></div></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_1BYj">Copy</button></div></pre><h2><a aria-hidden="true" class="anchor" id="my-app-crashes-with-methodnotfoundexception-classnotfoundexception-nosuchfieldexception-or-something-similar-how-do-i-fix-this"></a><a aria-hidden="true" class="hash-link" href="#my-app-crashes-with-methodnotfoundexception-classnotfoundexception-nosuchfieldexception-or-something-similar-how-do-i-fix-this">#</a>My App crashes with <code>MethodNotFoundException</code>, <code>ClassNotFoundException</code>, <code>NoSuchFieldException</code>, or something similar. How do I fix this?</h2><p>Redex probably deleted or renamed it. Redex is quite aggressive about deleting
things it deems are unreachable. But, often Redex doesn&#x27;t know about reflection
or other complex ways an entity could be reached.</p><p>Here&#x27;s how you ensure Redex will not delete or rename something:</p><p>Annotate any class, method, or field you want to keep with <code>@DoNotStrip</code>.</p><p>Add this to your redex config (at the uppermost level of the json) to
prevent deletion:</p><pre class="mdxCodeBlock_iHAB"><div class="codeBlockWrapper_2QGZ"><pre class="prism-code language-undefined codeBlock_19pQ" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">&quot;keep_annotations&quot;: [</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  &quot;Lcom/path/to/your/DoNotStrip;&quot;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">]</span></div></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_1BYj">Copy</button></div></pre><p>and add this to your config to prevent renaming:</p><pre class="mdxCodeBlock_iHAB"><div class="codeBlockWrapper_2QGZ"><pre class="prism-code language-undefined codeBlock_19pQ" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">&quot;RenameClassesPassV2&quot; : {</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  &quot;dont_rename_annotated&quot;: [</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    &quot;Lcom/path/to/your/DoNotStrip;&quot;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  ]</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">}</span></div></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_1BYj">Copy</button></div></pre><p>and define <code>DoNotStrip</code>:</p><pre class="mdxCodeBlock_iHAB"><div class="codeBlockWrapper_2QGZ"><pre class="prism-code language-undefined codeBlock_19pQ" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">package com.path.to.your;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">public @interface DoNotStrip {}</span></div></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_1BYj">Copy</button></div></pre><h2><a aria-hidden="true" class="anchor" id="how-does-this-compare-to-proguard"></a><a aria-hidden="true" class="hash-link" href="#how-does-this-compare-to-proguard">#</a>How does this compare to ProGuard?</h2><p>ReDex is conceptually similar to ProGuard, in that both optimize bytecode.
ReDex, however, optimizes .dex bytecode, while ProGuard optimizes .class
bytecode before it is lowered to .dex.  Operating on .dex is sometimes an
advantage: you can consider the number of virtual registers used by a method
that is an inlining candidate, and you can control the layout of classes within
a dex file.  But ProGuard has some capabilities that ReDex does not (for
example, ReDex will not remove unused method parameters, which ProGuard does).</p><h2><a aria-hidden="true" class="anchor" id="how-about-dexguard"></a><a aria-hidden="true" class="hash-link" href="#how-about-dexguard">#</a>How about DexGuard?</h2><p>DexGuard operates on dex, but we haven&#x27;t evaluated it at all since it&#x27;s closed
source.  We don&#x27;t use it at Facebook and we have no plans to start.</p></div></article><div class="margin-vert--xl"><div class="row"><div class="col"></div><div class="col text--right"><em><small>Last updated<!-- --> <!-- -->on<!-- --> <strong>2/28/2019</strong> <!-- -->by <strong>Joel Marcey</strong></small></em></div></div></div><div class="margin-vert--lg"><nav class="pagination-nav"><div class="pagination-nav__item"><a class="pagination-nav__link" href="/docs/interdex"><h5 class="pagination-nav__link--sublabel">Previous</h5><h4 class="pagination-nav__link--label">« <!-- -->Interdex</h4></a></div><div class="pagination-nav__item pagination-nav__item--next"></div></nav></div></div></div><div class="col col--3"><div class="tableOfContents_TbNY"><ul class="contents contents__left-border"><li><a href="#im-getting-couldnt-find-zipalign-see-readmemd-to-resolve-this-or-other-zipalign-errors" class="contents__link">I&#x27;m getting &quot;Couldn&#x27;t find zipalign. See README.md to resolve this.&quot; or other zipalign errors</a></li><li><a href="#my-app-fails-to-install-with-failure-install_parse_failed_no_certificates" class="contents__link">My app fails to install with Failure [INSTALL_PARSE_FAILED_NO_CERTIFICATES]</a></li><li><a href="#my-app-crashes-with-methodnotfoundexception-classnotfoundexception-nosuchfieldexception-or-something-similar-how-do-i-fix-this" class="contents__link">My App crashes with MethodNotFoundException, ClassNotFoundException, NoSuchFieldException, or something similar. How do I fix this?</a></li><li><a href="#how-does-this-compare-to-proguard" class="contents__link">How does this compare to ProGuard?</a></li><li><a href="#how-about-dexguard" class="contents__link">How about DexGuard?</a></li></ul></div></div></div></div></div></div></main></div>
</div>

<script type="text/javascript" src="/runtime~main.f6234091cb196bda572f.js"></script>

<script type="text/javascript" src="/main.a25ee9685353cfad9c19.js"></script>

<script type="text/javascript" src="/0.ab470b1d243b785a50f1.js"></script>

<script type="text/javascript" src="/component---theme-doc-page-1-be-9be.de09a1a8cec9a2e9c92b.js"></script>

<script type="text/javascript" src="/26.4d43b3044a97b939d9c5.js"></script>

<script type="text/javascript" src="/docsMetadata---docsaf-7-b03.61a8baebf32b4c060296.js"></script>

<script type="text/javascript" src="/component---theme-doc-item-178-a40.e0d35aec50d7c7aaa812.js"></script>

<script type="text/javascript" src="/content---docs-faqf-0-e-366.a92b383f4c50e7f5275c.js"></script>

<script type="text/javascript" src="/metadata---docs-faq-1-a-7-86f.f623057bb9102adc1508.js"></script>

</body>
</html>