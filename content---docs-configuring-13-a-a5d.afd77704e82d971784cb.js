(window.webpackJsonp=window.webpackJsonp||[]).push([[6],{50:function(e,n,t){"use strict";t.r(n),t.d(n,"frontMatter",(function(){return o})),t.d(n,"rightToc",(function(){return s})),t.d(n,"default",(function(){return l}));t(0);var a=t(64);function r(){return(r=Object.assign||function(e){for(var n=1;n<arguments.length;n++){var t=arguments[n];for(var a in t)Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a])}return e}).apply(this,arguments)}function i(e,n){if(null==e)return{};var t,a,r=function(e,n){if(null==e)return{};var t,a,r={},i=Object.keys(e);for(a=0;a<i.length;a++)t=i[a],n.indexOf(t)>=0||(r[t]=e[t]);return r}(e,n);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)t=i[a],n.indexOf(t)>=0||Object.prototype.propertyIsEnumerable.call(e,t)&&(r[t]=e[t])}return r}var o={id:"configuring",title:"Configuring ReDex"},s=[],p={rightToc:s},c="wrapper";function l(e){var n=e.components,t=i(e,["components"]);return Object(a.b)(c,r({},p,t,{components:n,mdxType:"MDXLayout"}),Object(a.b)("p",null,"ReDex can be configured to run different optimizations or to alter the behavior\nof existing optimizations.  While this isn't always necessary, it's helpful to\nbe able to tweak settings to get the best results."),Object(a.b)("h1",{id:"a-simple-example"},"A Simple Example"),Object(a.b)("p",null,"A starting point for configuration is to use a configuration similar to the\ndefault config that's baked in to the ",Object(a.b)("inlineCode",{parentName:"p"},"redex")," binary.  You can find this config\nin ",Object(a.b)("inlineCode",{parentName:"p"},"config/default.config"),".  This is what it looks like:"),Object(a.b)("pre",null,Object(a.b)("code",r({parentName:"pre"},{}),'{\n"redex" : {\n  "passes" : [\n    "ReBindRefsPass",\n    "BridgePass",\n    "SynthPass",\n    "FinalInlinePass",\n    "DelSuperPass",\n    "SingleImplPass",\n    "MethodInlinePass",\n    "StaticReloPass",\n    "RemoveEmptyClassesPass",\n    "ShortenSrcStringsPass"\n  ]\n}\n}\n')),Object(a.b)("p",null,"Name this file default.config, and invoke ",Object(a.b)("inlineCode",{parentName:"p"},"redex")," with it:"),Object(a.b)("pre",null,Object(a.b)("code",r({parentName:"pre"},{}),"% redex -c default.config -o tmp/output.apk input.apk\n")),Object(a.b)("p",null,"This will do... exactly what redex does without the config.  Not so exciting, is\nit?  Let's move on to something more advanced."),Object(a.b)("h1",{id:"selecting-optimization-passes"},"Selecting Optimization Passes"),Object(a.b)("p",null,"Changing the set of optimizations ReDex runs is easy; just add (or remove) the\npass name from the redex.passes list.  For example, let's say you want to remove\nthe ShortenSrcStrings optimization while you're debugging something.  Just use\nthis config:"),Object(a.b)("pre",null,Object(a.b)("code",r({parentName:"pre"},{}),'{\n"redex" : {\n  "passes" : [\n    "ReBindRefsPass",\n    "BridgePass",\n    "SynthPass",\n    "FinalInlinePass",\n    "DelSuperPass",\n    "SingleImplPass",\n    "MethodInlinePass",\n    "RemoveEmptyClassesPass"\n  ]\n}\n}\n')),Object(a.b)("h1",{id:"configuring-optimization-behavior"},"Configuring optimization behavior"),Object(a.b)("p",null,"Each optimization pass has some configurable parameters that are specific to\nthat pass.  These are often blacklists (or whitelists) indicating what code the\noptimization should leave alone (for blacklists) or what code should be\noptimized (for whitelists)."),Object(a.b)("p",null,"A simple example is ShortenSrcStrings.  This pass removes filenames indicating\nwhat source code produced each class.  It's a waste to ship those source strings\nto production, but it's useful to be able to map the shortened names back to the\noriginal names (e.g., for solving user bug reports).  You can tell\nShortenSrcStrings to produce this map by adding a config entry:"),Object(a.b)("pre",null,Object(a.b)("code",r({parentName:"pre"},{}),'"redex" : {\n  "passes" : [\n    ShortenSrcStrings\n  ]\n},\n"ShortenSrcStringsPass" : {\n  "filename_mappings" : "/tmp/filename_mappings.txt"\n}\n')),Object(a.b)("p",null,"Options for each pass are documented with that pass."),Object(a.b)("h1",{id:"global-options"},"Global options"),Object(a.b)("ul",null,Object(a.b)("li",{parentName:"ul"},Object(a.b)("p",{parentName:"li"},Object(a.b)("inlineCode",{parentName:"p"},"redex.passes"),Object(a.b)("br",{parentName:"p"}),"\n","",Object(a.b)("strong",{parentName:"p"},"Type"),": array of strings",Object(a.b)("br",{parentName:"p"}),"\n","A list of passes to be run in the specified order.")),Object(a.b)("li",{parentName:"ul"},Object(a.b)("p",{parentName:"li"},Object(a.b)("inlineCode",{parentName:"p"},"coldstart_classes"),Object(a.b)("br",{parentName:"p"}),"\n","",Object(a.b)("strong",{parentName:"p"},"Type"),": string",Object(a.b)("br",{parentName:"p"}),"\n","Path to a file containing a list of class names in the order they are used\nfor cold start.  Example format:  "),Object(a.b)("pre",{parentName:"li"},Object(a.b)("code",r({parentName:"pre"},{}),"com/foo/Bar.class\ncom/foo/Baz.class\n...\ncom/foo/Quux.class\n"))),Object(a.b)("li",{parentName:"ul"},Object(a.b)("p",{parentName:"li"},Object(a.b)("inlineCode",{parentName:"p"},"proguard_map"),Object(a.b)("br",{parentName:"p"}),"\n","",Object(a.b)("strong",{parentName:"p"},"Type"),": string",Object(a.b)("br",{parentName:"p"}),"\n","Path to a file containing ProGuard's mapping of unobfuscated\nclass/field/method names to obfuscated names.  This option is useful if you\nare running ReDex after ProGuard, so that ReDex will properly understand\nobfuscated names."))))}l.isMDXComponent=!0},64:function(e,n,t){"use strict";t.d(n,"a",(function(){return s})),t.d(n,"b",(function(){return b}));var a=t(0),r=t.n(a),i=r.a.createContext({}),o=function(e){var n=r.a.useContext(i),t=n;return e&&(t="function"==typeof e?e(n):Object.assign({},n,e)),t},s=function(e){var n=o(e.components);return r.a.createElement(i.Provider,{value:n},e.children)};var p="mdxType",c={inlineCode:"code",wrapper:function(e){var n=e.children;return r.a.createElement(r.a.Fragment,{},n)}},l=Object(a.forwardRef)((function(e,n){var t=e.components,a=e.mdxType,i=e.originalType,s=e.parentName,p=function(e,n){var t={};for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&-1===n.indexOf(a)&&(t[a]=e[a]);return t}(e,["components","mdxType","originalType","parentName"]),l=o(t),b=a,u=l[s+"."+b]||l[b]||c[b]||i;return t?r.a.createElement(u,Object.assign({},{ref:n},p,{components:t})):r.a.createElement(u,Object.assign({},{ref:n},p))}));function b(e,n){var t=arguments,a=n&&n.mdxType;if("string"==typeof e||a){var i=t.length,o=new Array(i);o[0]=l;var s={};for(var c in n)hasOwnProperty.call(n,c)&&(s[c]=n[c]);s.originalType=e,s[p]="string"==typeof e?e:a,o[1]=s;for(var b=2;b<i;b++)o[b]=t[b];return r.a.createElement.apply(null,o)}return r.a.createElement.apply(null,t)}l.displayName="MDXCreateElement"}}]);